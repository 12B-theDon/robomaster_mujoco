# Xbox Wireless Controller (Bluetooth)
# Deadman: RB (buttons[5]) for LED and other auxiliary actions
# (cmd_vel is handled by teleop_twist_joy separately)
/**:
  ros__parameters:
    # ─────────────── LED 제어 ───────────────
    yellow:
      type: topic
      interface_type: "robomaster_msgs/msg/LEDEffect"
      topic_name: leds/effect
      deadman_buttons: [5, 3]        # RB + Y
      message_value:
        color-r: { value: 1.0 }
        color-g: { value: 1.0 }

    blue:
      type: topic
      interface_type: "robomaster_msgs/msg/LEDEffect"
      topic_name: leds/effect
      deadman_buttons: [5, 2]        # RB + X
      message_value:
        color-b: { value: 1.0 }

    green:
      type: topic
      interface_type: "robomaster_msgs/msg/LEDEffect"
      topic_name: leds/effect
      deadman_buttons: [5, 1]        # RB + B
      message_value:
        color-g: { value: 1.0 }

    red:
      type: topic
      interface_type: "robomaster_msgs/msg/LEDEffect"
      topic_name: leds/effect
      deadman_buttons: [5, 0]        # RB + A
      message_value:
        color-r: { value: 1.0 }

    off:
      type: topic
      interface_type: "robomaster_msgs/msg/LEDEffect"
      topic_name: leds/effect
      deadman_buttons: [5, 4]        # RB + LB
      message_value:
        effect: { value: 0 }

    # ─────────────── 그리퍼 제어 ───────────────
    close_gripper:
      type: action
      interface_type: robomaster_msgs/action/GripperControl
      action_name: gripper
      action_goal:
        target_state: 2               # close
      deadman_buttons: [4]            # LB 반드시 같이 눌러야 작동
      buttons: [2]                    # X

    open_gripper:
      type: action
      interface_type: robomaster_msgs/action/GripperControl
      action_name: gripper
      action_goal:
        target_state: 1               # open
      deadman_buttons: [4]
      buttons: [0]                    # A

    # ─────────────── 팔 제어 ───────────────
    comarm:
      type: topic
      interface_type: "geometry_msgs/msg/Vector3"
      topic_name: cmd_arm
      deadman_buttons: [4]            # LB
      axis_mappings:
        x:
          axis: 0
          scale: -0.15
          offset: 0.0                 # ← offset 필수
        
        y:
          axis: 6
          scale: 0.00
          offset: 0.0

        z:
          axis: 1
          scale: 0.15
          offset: 0.0

    # ─────────────── 휠 모터 제어 ───────────────
    engage:
      type: service
      interface_type: std_srvs/srv/SetBool
      service_name: engage_wheels
      service_request: { data: true }
      deadman_buttons: [4]
      buttons: [1]                    # LB + B

    disengage:
      type: service
      interface_type: std_srvs/srv/SetBool
      service_name: engage_wheels
      service_request: { data: false }
      deadman_buttons: [4]
      buttons: [3]                    # LB + Y
